openapi: 3.0.3
info:
  title: DOCUMENTATION API SPI
  description: |-
    Documentation de l'API du Système de Paiement Instantané (PI-SPI) de la BCEAO.

    PI-SPI gère les opérations de virement, de paiement, de règlement et de gestion des comptes des participants

    # Généralités
    

    ## Gestion des versions 

    ## Gestion des erreurs 
    Cette section liste les erreurs qui peuvent être renvoyées par les points de terminaison de l'API
   
    ### `FormatInvalide`
      * __Signification__: Format dui message envoyé invalide
      * __HTTP Status Code__: [400 Bad Request](https://tools.ietf.org/html/rfc7231#section-6.5.1).

    
    ## Recommandations 

    # Sécurité
    
    ## Authentification

    ## Signature numérique

    ## Limitation des requêtes

  version: 0.0.1

servers:
  - url: https://api.test.pi-bceao.com/spi/v1

## the default validator applied to endpoints


# Define Endpoints
paths:
  /transferts:
    post:
      tags:
        - Transferts
      summary: Pour envoyer une demande de transfert de fonds
      description: Envoyer un pacs.008 au SPI pour effectuer un transfert de fonds
      operationId: envoyerTransfert
      requestBody:
        description: Message ISO 20022 pacs.008
        content:
          application/xml:
            schema:
              $ref: '#/components/schemas/MessagePacs008'
            examples:
              VIREMENT:
                value: |
                  <RequestPayload xmlns="urn:bceao:pi:xsd:payload.1.0.0"
                    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:bceao:pi:xsd:payload.1.0.0 ../xsd/pi.payload.1.0.0.xsd">
                    <AppHdr xmlns="urn:iso:std:iso:20022:tech:xsd:head.001.001.03">
                      <Fr>
                        <FIId>
                          <FinInstnId>
                            <Nm>PI</Nm>
                            <Othr>
                              <Id>PIUMOA</Id>
                            </Othr>
                          </FinInstnId>
                        </FIId>
                      </Fr>
                      <To>
                        <FIId>
                          <FinInstnId>
                            <Nm>PSP banque TG 005</Nm>
                            <Othr>
                              <Id>TGB005</Id>
                            </Othr>
                          </FinInstnId>
                        </FIId>
                      </To>
                      <BizMsgIdr>MPIUMOAoUUVMhtGwtcHdmyomo9aHZ1cqk77</BizMsgIdr>
                      <MsgDefIdr>camt.014.001.05</MsgDefIdr>
                      <CreDt>2023-02-10T08:30:13.211Z</CreDt>
                      <Sgntr></Sgntr>
                    </AppHdr>
                    <Document xmlns="urn:iso:std:iso:20022:tech:xsd:pacs.008.001.10">
                      <FIToFICstmrCdtTrf>
                        <GrpHdr>
                          <MsgId>MSNB001nXydyOl7iIZSKdzEGZfWcWBaB6bY</MsgId>
                          <CreDtTm>2023-02-21T15:35:54.362Z</CreDtTm>
                          <NbOfTxs>1</NbOfTxs>
                          <SttlmInf>
                            <SttlmMtd>CLRG</SttlmMtd>
                          </SttlmInf>
                        </GrpHdr>
                        <CdtTrfTxInf>
                          <PmtId>
                            <EndToEndId>ESNB00120230221153554KXvozkpNvhUk9e</EndToEndId>
                          </PmtId>
                          <PmtTpInf>
                            <LclInstrm>
                              <Prtry>333</Prtry>
                            </LclInstrm>
                            <CtgyPurp>
                              <Prtry>VP2P</Prtry>
                            </CtgyPurp>
                          </PmtTpInf>
                          <IntrBkSttlmAmt Ccy="XOF">100000</IntrBkSttlmAmt>
                          <AccptncDtTm>2023-02-21T15:35:54.199Z</AccptncDtTm>
                          <ChrgBr>SLEV</ChrgBr>
                          <Dbtr>
                            <Nm>Khady DIOP</Nm>
                            <PstlAdr>
                              <TwnNm>Dakar</TwnNm>
                              <AdrLine>48.862725</AdrLine>
                              <AdrLine>2.287592</AdrLine>
                            </PstlAdr>
                            <Id>
                              <PrvtId>
                                <DtAndPlcOfBirth>
                                  <BirthDt>1992-02-21</BirthDt>
                                  <CityOfBirth>Dakar</CityOfBirth>
                                  <CtryOfBirth>SN</CtryOfBirth>
                                </DtAndPlcOfBirth>
                                <Othr>
                                  <Id>2892199202358</Id>
                                  <SchmeNm>
                                    <Cd>NIDN</Cd>
                                  </SchmeNm>
                                </Othr>
                              </PrvtId>
                            </Id>
                            <CtryOfRes>SN</CtryOfRes>
                          </Dbtr>
                          <DbtrAcct>
                            <Id>
                              <IBAN>SN0110333333000003122583</IBAN>
                            </Id>
                            <Tp>
                              <Cd>CACC</Cd>
                            </Tp>
                            <Ccy>XOF</Ccy>
                          </DbtrAcct>
                          <DbtrAgt>
                            <FinInstnId>
                              <Nm>Participant payeur</Nm>
                              <Othr>
                                <Id>SNB001</Id>
                              </Othr>
                            </FinInstnId>
                            <BrnchId>
                              <Id>03333</Id>
                            </BrnchId>
                          </DbtrAgt>
                          <CdtrAgt>
                            <FinInstnId>
                              <Nm>Participant paye</Nm>
                              <Othr>
                                <Id>SNB234</Id>
                              </Othr>
                            </FinInstnId>
                            <BrnchId>
                              <Id>02222</Id>
                            </BrnchId>
                          </CdtrAgt>
                          <Cdtr>
                            <Nm>Mariam TRAORE</Nm>
                            <Id>
                              <PrvtId>
                                <DtAndPlcOfBirth>
                                  <BirthDt>2002-08-23</BirthDt>
                                  <CityOfBirth>Dakar</CityOfBirth>
                                  <CtryOfBirth>SN</CtryOfBirth>
                                </DtAndPlcOfBirth>
                                <Othr>
                                  <Id>5069712345607</Id>
                                  <SchmeNm>
                                    <Cd>NIDN</Cd>
                                  </SchmeNm>
                                </Othr>
                              </PrvtId>
                            </Id>
                            <CtryOfRes>SN</CtryOfRes>
                          </Cdtr>
                          <CdtrAcct>
                            <Id>
                              <IBAN>SN0110222223000003122583</IBAN>
                            </Id>
                            <Tp>
                              <Cd>SVGS</Cd>
                            </Tp>
                            <Ccy>XOF</Ccy>
                            <Prxy>
                              <Id>+221778520236</Id>
                            </Prxy>
                          </CdtrAcct>
                        </CdtTrfTxInf>
                      </FIToFICstmrCdtTrf>
                    </Document>
                  </RequestPayload>
              PAIEMENT:
                value: |
                  <RequestPayload xmlns="urn:bceao:pi:xsd:payload.1.0.0"
                    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:bceao:pi:xsd:payload.1.0.0 ../xsd/pi.payload.1.0.0.xsd">
                    <AppHdr xmlns="urn:iso:std:iso:20022:tech:xsd:head.001.001.03">
                      <Fr>
                        <FIId>
                          <FinInstnId>
                            <Nm>PI</Nm>
                            <Othr>
                              <Id>PIUMOA</Id>
                            </Othr>
                          </FinInstnId>
                        </FIId>
                      </Fr>
                      <To>
                        <FIId>
                          <FinInstnId>
                            <Nm>PSP banque TG 005</Nm>
                            <Othr>
                              <Id>TGB005</Id>
                            </Othr>
                          </FinInstnId>
                        </FIId>
                      </To>
                      <BizMsgIdr>MPIUMOAoUUVMhtGwtcHdmyomo9aHZ1cqk77</BizMsgIdr>
                      <MsgDefIdr>camt.014.001.05</MsgDefIdr>
                      <CreDt>2023-02-10T08:30:13.211Z</CreDt>
                      <Sgntr></Sgntr>
                    </AppHdr>
                    <Document xmlns="urn:iso:std:iso:20022:tech:xsd:pacs.008.001.10">
                      <FIToFICstmrCdtTrf>
                        <GrpHdr>
                          <MsgId>MSNB001nXydyOl7iIZSKdzEGZfWcWBaB6bY</MsgId>
                          <CreDtTm>2023-02-21T15:35:54.362Z</CreDtTm>
                          <NbOfTxs>1</NbOfTxs>
                          <SttlmInf>
                            <SttlmMtd>CLRG</SttlmMtd>
                          </SttlmInf>
                        </GrpHdr>
                        <CdtTrfTxInf>
                          <PmtId>
                            <EndToEndId>ESNB00120230221153554KXvozkpNvhUk9e</EndToEndId>
                            <TxId>1234-456789-456778-1234</TxId>
                          </PmtId>
                          <PmtTpInf>
                            <LclInstrm>
                              <Prtry>500</Prtry>
                            </LclInstrm>
                            <CtgyPurp>
                              <Prtry>PP2B</Prtry>
                            </CtgyPurp>
                          </PmtTpInf>
                          <IntrBkSttlmAmt Ccy="XOF">100000</IntrBkSttlmAmt>
                          <AccptncDtTm>2023-02-21T15:35:54.199Z</AccptncDtTm>
                          <ChrgBr>SLEV</ChrgBr>
                          <Dbtr>
                            <Nm>Khady DIOP</Nm>
                            <PstlAdr>
                              <TwnNm>Dakar</TwnNm>
                              <AdrLine>48.862725</AdrLine>
                              <AdrLine>2.287592</AdrLine>
                            </PstlAdr>
                            <Id>
                              <PrvtId>
                                <DtAndPlcOfBirth>
                                  <BirthDt>1992-02-21</BirthDt>
                                  <CityOfBirth>Dakar</CityOfBirth>
                                  <CtryOfBirth>SN</CtryOfBirth>
                                </DtAndPlcOfBirth>
                                <Othr>
                                  <Id>2892199202358</Id>
                                  <SchmeNm>
                                    <Cd>NIDN</Cd>
                                  </SchmeNm>
                                </Othr>
                              </PrvtId>
                            </Id>
                            <CtryOfRes>SN</CtryOfRes>
                          </Dbtr>
                          <DbtrAcct>
                            <Id>
                              <IBAN>SN0110333333000003122583</IBAN>
                            </Id>
                            <Tp>
                              <Cd>CACC</Cd>
                            </Tp>
                            <Ccy>XOF</Ccy>
                          </DbtrAcct>
                          <DbtrAgt>
                            <FinInstnId>
                              <Nm>Participant payeur</Nm>
                              <Othr>
                                <Id>SNB001</Id>
                              </Othr>
                            </FinInstnId>
                            <BrnchId>
                              <Id>03333</Id>
                            </BrnchId>
                          </DbtrAgt>
                          <CdtrAgt>
                            <FinInstnId>
                              <Nm>Participant Paye</Nm>
                              <Othr>
                                <Id>SNB234</Id>
                              </Othr>
                            </FinInstnId>
                            <BrnchId>
                              <Id>05689</Id>
                            </BrnchId>
                          </CdtrAgt>
                          <Cdtr>
                            <Nm>Boutique XXX</Nm>
                            <Id>
                              <OrgId>
                                <Othr>
                                  <Id>00014622G3</Id>
                                  <SchmeNm>
                                    <Cd>TXID</Cd>
                                  </SchmeNm>
                                </Othr>
                              </OrgId>
                            </Id>
                            <CtryOfRes>SN</CtryOfRes>
                          </Cdtr>
                          <CdtrAcct>
                            <Id>
                              <IBAN>SN0110568943000003122583</IBAN>
                            </Id>
                            <Tp>
                              <Cd>SVGS</Cd>
                            </Tp>
                            <Ccy>XOF</Ccy>
                            <Prxy>
                              <Id>b4f7c90a-c746-11ed-afa1-0242ac120002</Id>
                            </Prxy>
                          </CdtrAcct>
                        </CdtTrfTxInf>
                      </FIToFICstmrCdtTrf>
                    </Document>
                  </RequestPayload>
        required: true
      responses:
        '201':
          description: Message créé
        '400':
          $ref: "#/components/responses/FormatInvalide"
        '401':
          description: Autorisations manquantes

  /transferts/rapports:
    post:
      tags:
        - Transferts
      summary: Pour envoyer la reponse d'une demande de transfert de fonds
      description: Envoyer un pacs.002 au SPI pour effectuer un transfert de fonds
      operationId: envoyerRapportTransfert
      requestBody:
        description: Message ISO 20022 pacs.002
        content:
          application/xml:
            schema:
              $ref: '#/components/schemas/MessagePacs002'
            examples:
              AVIS_DEBIT:
                value: |
                  <RequestPayload xmlns="urn:bceao:pi:xsd:payload.1.0.0"
                    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:bceao:pi:xsd:payload.1.0.0 ../xsd/pi.payload.1.0.0.xsd">
                    <AppHdr xmlns="urn:iso:std:iso:20022:tech:xsd:head.001.001.03">
                      <Fr>
                        <FIId>
                          <FinInstnId>
                            <Nm>PI</Nm>
                            <Othr>
                              <Id>PIUMOA</Id>
                            </Othr>
                          </FinInstnId>
                        </FIId>
                      </Fr>
                      <To>
                        <FIId>
                          <FinInstnId>
                            <Nm>PSP banque TG 005</Nm>
                            <Othr>
                              <Id>TGB005</Id>
                            </Othr>
                          </FinInstnId>
                        </FIId>
                      </To>
                      <BizMsgIdr>MPIUMOAoUUVMhtGwtcHdmyomo9aHZ1cqk77</BizMsgIdr>
                      <MsgDefIdr>camt.014.001.05</MsgDefIdr>
                      <CreDt>2023-02-10T08:30:13.211Z</CreDt>
                      <Sgntr></Sgntr>
                    </AppHdr>
                    <Document xmlns="urn:iso:std:iso:20022:tech:xsd:pacs.002.001.12">
                      <FIToFIPmtStsRpt>
                        <GrpHdr>
                          <MsgId>MPIUMOAnXydyOl7iIZSKdzEGZfWcWBaB6bY</MsgId>
                          <CreDtTm>2023-02-21T15:36:00.150Z</CreDtTm>
                        </GrpHdr>
                        <TxInfAndSts>
                          <OrgnlGrpInf>
                            <OrgnlMsgId>MSNB001nXydyOl7iIZSKdzEGZfWcWBaB6bY</OrgnlMsgId>
                            <OrgnlMsgNmId>pacs.008.001.10</OrgnlMsgNmId>
                            <OrgnlCreDtTm>2023-02-21T15:35:54.362Z</OrgnlCreDtTm>
                          </OrgnlGrpInf>
                          <OrgnlEndToEndId>ESNB00120230208153623X7cQSIJnmLCBvm</OrgnlEndToEndId>
                          <TxSts>ACSC</TxSts>
                          <FctvIntrBkSttlmDt>
                            <DtTm>2023-02-21T15:35:59.362Z</DtTm>
                          </FctvIntrBkSttlmDt>
                        </TxInfAndSts>
                      </FIToFIPmtStsRpt>
                    </Document>
                  </RequestPayload>
              AVIS_CREDIT:
                value: |
                  <RequestPayload xmlns="urn:bceao:pi:xsd:payload.1.0.0"
                    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:bceao:pi:xsd:payload.1.0.0 ../xsd/pi.payload.1.0.0.xsd">
                    <AppHdr xmlns="urn:iso:std:iso:20022:tech:xsd:head.001.001.03">
                      <Fr>
                        <FIId>
                          <FinInstnId>
                            <Nm>PI</Nm>
                            <Othr>
                              <Id>PIUMOA</Id>
                            </Othr>
                          </FinInstnId>
                        </FIId>
                      </Fr>
                      <To>
                        <FIId>
                          <FinInstnId>
                            <Nm>PSP banque TG 005</Nm>
                            <Othr>
                              <Id>TGB005</Id>
                            </Othr>
                          </FinInstnId>
                        </FIId>
                      </To>
                      <BizMsgIdr>MPIUMOAoUUVMhtGwtcHdmyomo9aHZ1cqk77</BizMsgIdr>
                      <MsgDefIdr>camt.014.001.05</MsgDefIdr>
                      <CreDt>2023-02-10T08:30:13.211Z</CreDt>
                      <Sgntr></Sgntr>
                    </AppHdr>
                    <Document xmlns="urn:iso:std:iso:20022:tech:xsd:pacs.002.001.12">
                      <FIToFIPmtStsRpt>
                        <GrpHdr>
                          <MsgId>MPIUMOAnXydyOl7iIZSKdzEGZfWcWBaB6bY</MsgId>
                          <CreDtTm>2023-02-21T15:36:00.150Z</CreDtTm>
                        </GrpHdr>
                        <TxInfAndSts>
                          <OrgnlGrpInf>
                            <OrgnlMsgId>MPIUMOAnXydyOl7iIZSKdzEGZfWcWBaB6bY</OrgnlMsgId>
                            <OrgnlMsgNmId>pacs.008.001.10</OrgnlMsgNmId>
                            <OrgnlCreDtTm>2023-02-21T15:35:58.205Z</OrgnlCreDtTm>
                          </OrgnlGrpInf>
                          <OrgnlEndToEndId>ESNB00120230208153623X7cQSIJnmLCBvm</OrgnlEndToEndId>
                          <TxSts>ACCC</TxSts>
                          <FctvIntrBkSttlmDt>
                            <DtTm>2023-02-21T15:35:59.362Z</DtTm>
                          </FctvIntrBkSttlmDt>
                        </TxInfAndSts>
                      </FIToFIPmtStsRpt>
                    </Document>
                  </RequestPayload>
              MODIF_CODE_SERVIVE:
                value: |
                  <RequestPayload xmlns="urn:bceao:pi:xsd:payload.1.0.0"
                    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:bceao:pi:xsd:payload.1.0.0 ../xsd/pi.payload.1.0.0.xsd">
                    <AppHdr xmlns="urn:iso:std:iso:20022:tech:xsd:head.001.001.03">
                      <Fr>
                        <FIId>
                          <FinInstnId>
                            <Nm>PI</Nm>
                            <Othr>
                              <Id>PIUMOA</Id>
                            </Othr>
                          </FinInstnId>
                        </FIId>
                      </Fr>
                      <To>
                        <FIId>
                          <FinInstnId>
                            <Nm>PSP banque TG 005</Nm>
                            <Othr>
                              <Id>TGB005</Id>
                            </Othr>
                          </FinInstnId>
                        </FIId>
                      </To>
                      <BizMsgIdr>MPIUMOAoUUVMhtGwtcHdmyomo9aHZ1cqk77</BizMsgIdr>
                      <MsgDefIdr>camt.014.001.05</MsgDefIdr>
                      <CreDt>2023-02-10T08:30:13.211Z</CreDt>
                      <Sgntr></Sgntr>
                    </AppHdr>
                    <Document xmlns="urn:iso:std:iso:20022:tech:xsd:pacs.002.001.12">
                      <FIToFIPmtStsRpt>
                        <GrpHdr>
                          <MsgId>MPIUMOAnXydyOl7iIZSKdzEGZfWcWBaB6bY</MsgId>
                          <CreDtTm>2023-05-23T15:36:00.150Z</CreDtTm>
                        </GrpHdr>
                        <TxInfAndSts>
                          <OrgnlGrpInf>
                            <OrgnlMsgId>MPIUMOAnXydyOl7iIZSKdzEGZfWcWBaB6bY</OrgnlMsgId>
                            <OrgnlMsgNmId>pacs.008.001.10</OrgnlMsgNmId>
                            <OrgnlCreDtTm>2023-02-21T15:35:58.205Z</OrgnlCreDtTm>
                          </OrgnlGrpInf>
                          <OrgnlEndToEndId>ESNB00120230208153623X7cQSIJnmLCBvm</OrgnlEndToEndId>
                          <TxSts>ACCC</TxSts>
                          <FctvIntrBkSttlmDt>
                            <DtTm>2023-05-23T15:35:59.362Z</DtTm>
                          </FctvIntrBkSttlmDt>
                          <OrgnlTxRef>
                            <PmtTpInf>
                                <CtgyPurp>
                                    <Prtry>PP2P</Prtry>
                                </CtgyPurp>
                            </PmtTpInf>
                          </OrgnlTxRef>
                        </TxInfAndSts>
                      </FIToFIPmtStsRpt>
                    </Document>
                  </RequestPayload>
              REJET:
                value: |
                  <RequestPayload xmlns="urn:bceao:pi:xsd:payload.1.0.0"
                    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:bceao:pi:xsd:payload.1.0.0 ../xsd/pi.payload.1.0.0.xsd">
                    <AppHdr xmlns="urn:iso:std:iso:20022:tech:xsd:head.001.001.03">
                      <Fr>
                        <FIId>
                          <FinInstnId>
                            <Nm>PI</Nm>
                            <Othr>
                              <Id>PIUMOA</Id>
                            </Othr>
                          </FinInstnId>
                        </FIId>
                      </Fr>
                      <To>
                        <FIId>
                          <FinInstnId>
                            <Nm>PSP banque TG 005</Nm>
                            <Othr>
                              <Id>TGB005</Id>
                            </Othr>
                          </FinInstnId>
                        </FIId>
                      </To>
                      <BizMsgIdr>MPIUMOAoUUVMhtGwtcHdmyomo9aHZ1cqk77</BizMsgIdr>
                      <MsgDefIdr>camt.014.001.05</MsgDefIdr>
                      <CreDt>2023-02-10T08:30:13.211Z</CreDt>
                      <Sgntr></Sgntr>
                    </AppHdr>
                    <Document xmlns="urn:iso:std:iso:20022:tech:xsd:pacs.002.001.12">
                      <FIToFIPmtStsRpt>
                        <GrpHdr>
                          <MsgId>MPIUMOAnXydyOl7iIZSKdzEGZfWcWBaB6bY</MsgId>
                          <CreDtTm>2023-02-21T15:36:00.150Z</CreDtTm>
                        </GrpHdr>
                        <TxInfAndSts>
                          <OrgnlGrpInf>
                            <OrgnlMsgId>MSNB001nXydyOl7iIZSKdzEGZfWcWBaB6bY</OrgnlMsgId>
                            <OrgnlMsgNmId>pacs.008.001.10</OrgnlMsgNmId>
                            <OrgnlCreDtTm>2023-02-21T15:35:58.205Z</OrgnlCreDtTm>
                          </OrgnlGrpInf>
                          <OrgnlEndToEndId>ESNB00120230208153623X7cQSIJnmLCBvm</OrgnlEndToEndId>
                          <TxSts>RJCT</TxSts>
                          <StsRsnInf>
                            <Rsn>
                              <Cd>AG11</Cd>
                            </Rsn>
                          </StsRsnInf>
                        </TxInfAndSts>
                      </FIToFIPmtStsRpt>
                    </Document>
                  </RequestPayload>
        required: true
      responses:
        '201':
          description: Message créé
        '400':
          $ref: "#/components/responses/FormatInvalide"
        '401':
          description: Autorisations manquantes

  /transferts/statuts:
    post:
      tags:
        - Transferts
      summary: Pour la recherche de statut d'une demande de virement
      description: Envoyer un pacs.028 au SPI pour effectuer la recherche de statut
      operationId: envoyerDemandeStatutTransfert
      requestBody:
        description: Message ISO 20022 pacs.028
        content:
          application/xml:
            schema:
              $ref: '#/components/schemas/MessagePacs028'
            examples:
              RECHERCHE_STATUT_VIREMENT:
                value: |
                  <RequestPayload xmlns="urn:bceao:pi:xsd:payload.1.0.0"
                    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:bceao:pi:xsd:payload.1.0.0 ../xsd/pi.payload.1.0.0.xsd">
                    <AppHdr xmlns="urn:iso:std:iso:20022:tech:xsd:head.001.001.03">
                      <Fr>
                        <FIId>
                          <FinInstnId>
                            <Nm>PI</Nm>
                            <Othr>
                              <Id>PIUMOA</Id>
                            </Othr>
                          </FinInstnId>
                        </FIId>
                      </Fr>
                      <To>
                        <FIId>
                          <FinInstnId>
                            <Nm>PSP banque TG 005</Nm>
                            <Othr>
                              <Id>TGB005</Id>
                            </Othr>
                          </FinInstnId>
                        </FIId>
                      </To>
                      <BizMsgIdr>MPIUMOAoUUVMhtGwtcHdmyomo9aHZ1cqk77</BizMsgIdr>
                      <MsgDefIdr>camt.014.001.05</MsgDefIdr>
                      <CreDt>2023-02-10T08:30:13.211Z</CreDt>
                      <Sgntr></Sgntr>
                    </AppHdr>
                    <Document xmlns="urn:iso:std:iso:20022:tech:xsd:pacs.028.001.05">
                      <FIToFIPmtStsReq>
                        <GrpHdr>
                          <MsgId>MSNF001nXydyOl7iIZSKdzEGZfWcWBaB6bY</MsgId>
                          <CreDtTm>2023-02-21T15:36:00.150Z</CreDtTm>
                        </GrpHdr>
                        <TxInf>
                            <OrgnlEndToEndId>ESNF00120230208153623X7cQSIJnmLCBvm</OrgnlEndToEndId>
                        </TxInf>
                      </FIToFIPmtStsReq>
                    </Document>
                  </RequestPayload>
        required: true
      responses:
        '200':
          description: Message créé
        '400':
          $ref: "#/components/responses/FormatInvalide"
        '401':
          description: Autorisations manquantes

  /verifications-identites:
    post:
      tags:
        - Verifications-Identites
      summary: Pour envoyer une demande de verification d'identité
      description: Envoyer un acmt.023 au SPI pour effectuer la verification d'identité
      operationId: envoyerVerificationIdentite
      requestBody:
        description: Message ISO 20022 acmt.023
        content:
          application/xml:
            schema:
              $ref: '#/components/schemas/MessageAcmt023'
            examples:
              VERIFICATION_IDENTITE_TYPE_OTHER:
                value: |
                  <RequestPayload xmlns="urn:bceao:pi:xsd:payload.1.0.0"
                    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:bceao:pi:xsd:payload.1.0.0 ../xsd/pi.payload.1.0.0.xsd">
                    <AppHdr xmlns="urn:iso:std:iso:20022:tech:xsd:head.001.001.03">
                      <Fr>
                        <FIId>
                          <FinInstnId>
                            <Nm>PI</Nm>
                            <Othr>
                              <Id>PIUMOA</Id>
                            </Othr>
                          </FinInstnId>
                        </FIId>
                      </Fr>
                      <To>
                        <FIId>
                          <FinInstnId>
                            <Nm>PSP banque TG 005</Nm>
                            <Othr>
                              <Id>TGB005</Id>
                            </Othr>
                          </FinInstnId>
                        </FIId>
                      </To>
                      <BizMsgIdr>MPIUMOAoUUVMhtGwtcHdmyomo9aHZ1cqk77</BizMsgIdr>
                      <MsgDefIdr>camt.014.001.05</MsgDefIdr>
                      <CreDt>2023-02-10T08:30:13.211Z</CreDt>
                      <Sgntr></Sgntr>
                    </AppHdr>
                    <Document xmlns="urn:iso:std:iso:20022:tech:xsd:acmt.023.001.03">
                      <IdVrfctnReq>
                        <Assgnmt>
                          <MsgId>MSNB001nXydyOl7iIZSKdzEGZfWcWBaB6bY</MsgId>
                          <CreDtTm>2023-02-21T15:30:00.250Z</CreDtTm>
                          <Assgnr>
                            <Agt>
                              <FinInstnId>
                                <Nm>PSP Banque SN 001</Nm>
                                <Othr>
                                    <Id>SNB001</Id>
                                </Othr>
                              </FinInstnId>
                            </Agt>
                          </Assgnr>
                          <Assgne>
                            <Agt>
                              <FinInstnId>
                                <Nm>PSP EME CI 001</Nm>
                                <Othr>
                                    <Id>CIC001</Id>
                                </Othr>
                              </FinInstnId>
                            </Agt>
                          </Assgne>
                        </Assgnmt>
                        <Vrfctn>
                          <Id>ESNB00120230221153554KXvozkpNvhUk9e</Id>
                          <PtyAndAcctId>
                            <Acct>
                              <Id>
                                <Othr>
                                  <Id>+2250771299999</Id>
                                </Othr>
                              </Id>
                            </Acct>
                          </PtyAndAcctId>
                        </Vrfctn>
                      </IdVrfctnReq>
                    </Document>
                  </RequestPayload>
              VERIFICATION_IDENTITE_TYPE_IBAN:
                value: |
                  <RequestPayload xmlns="urn:bceao:pi:xsd:payload.1.0.0"
                    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:bceao:pi:xsd:payload.1.0.0 ../xsd/pi.payload.1.0.0.xsd">
                    <AppHdr xmlns="urn:iso:std:iso:20022:tech:xsd:head.001.001.03">
                      <Fr>
                        <FIId>
                          <FinInstnId>
                            <Nm>PI</Nm>
                            <Othr>
                              <Id>PIUMOA</Id>
                            </Othr>
                          </FinInstnId>
                        </FIId>
                      </Fr>
                      <To>
                        <FIId>
                          <FinInstnId>
                            <Nm>PSP banque TG 005</Nm>
                            <Othr>
                              <Id>TGB005</Id>
                            </Othr>
                          </FinInstnId>
                        </FIId>
                      </To>
                      <BizMsgIdr>MPIUMOAoUUVMhtGwtcHdmyomo9aHZ1cqk77</BizMsgIdr>
                      <MsgDefIdr>camt.014.001.05</MsgDefIdr>
                      <CreDt>2023-02-10T08:30:13.211Z</CreDt>
                      <Sgntr></Sgntr>
                    </AppHdr>
                    <Document xmlns="urn:iso:std:iso:20022:tech:xsd:acmt.023.001.03">
                      <IdVrfctnReq>
                        <Assgnmt>
                          <MsgId>MSNB001nXydyOl7iIZSKdzEGZfWcWBaB6bY</MsgId>
                          <CreDtTm>2023-02-21T15:30:00.250Z</CreDtTm>
                          <Assgnr>
                            <Agt>
                              <FinInstnId>
                                <Nm>PSP Banque SN 001</Nm>
                                <Othr>
                                    <Id>SNB001</Id>
                                </Othr>
                              </FinInstnId>
                            </Agt>
                          </Assgnr>
                          <Assgne>
                            <Agt>
                              <FinInstnId>
                                <Nm>PSP Banque CI 030</Nm>
                                <Othr>
                                    <Id>CIB030</Id>
                                </Othr>
                              </FinInstnId>
                            </Agt>
                          </Assgne>
                        </Assgnmt>
                        <Vrfctn>
                          <Id>ESNB00120230221153554KXvozkpNvhUk9e</Id>
                          <PtyAndAcctId>
                            <Acct>
                              <Id>
                                <IBAN>CI0110568943000003122583</IBAN>
                              </Id>
                            </Acct>
                          </PtyAndAcctId>
                        </Vrfctn>
                      </IdVrfctnReq>
                    </Document>
                  </RequestPayload>
        required: true
      responses:
        '201':
          description: Message créé
        '400':
          $ref: "#/components/responses/FormatInvalide"
        '401':
          description: Autorisations manquantes

  /verifications-identites/rapports:
    post:
      tags:
        - Verifications-Identites
      summary: Pour envoyer la reponse d'une demande de verification d'identité
      description: Envoyer un acmt.024 au SPI pour repondre à une verification d'identité
      operationId: envoyerReponseVerificationIdentite
      requestBody:
        description: Message ISO 20022 acmt.024
        content:
          application/xml:
            schema:
              $ref: '#/components/schemas/MessageAcmt024'
            examples:
              REPONSE_VERIFICATION_IDENTITE_TYPE_OTHER:
                value: |
                  <RequestPayload xmlns="urn:bceao:pi:xsd:payload.1.0.0"
                    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:bceao:pi:xsd:payload.1.0.0 ../xsd/pi.payload.1.0.0.xsd">
                    <AppHdr xmlns="urn:iso:std:iso:20022:tech:xsd:head.001.001.03">
                      <Fr>
                        <FIId>
                          <FinInstnId>
                            <Nm>PI</Nm>
                            <Othr>
                              <Id>PIUMOA</Id>
                            </Othr>
                          </FinInstnId>
                        </FIId>
                      </Fr>
                      <To>
                        <FIId>
                          <FinInstnId>
                            <Nm>PSP banque TG 005</Nm>
                            <Othr>
                              <Id>TGB005</Id>
                            </Othr>
                          </FinInstnId>
                        </FIId>
                      </To>
                      <BizMsgIdr>MPIUMOAoUUVMhtGwtcHdmyomo9aHZ1cqk77</BizMsgIdr>
                      <MsgDefIdr>camt.014.001.05</MsgDefIdr>
                      <CreDt>2023-02-10T08:30:13.211Z</CreDt>
                      <Sgntr></Sgntr>
                    </AppHdr>
                    <Document xmlns="urn:iso:std:iso:20022:tech:xsd:acmt.024.001.03">
                      <IdVrfctnRpt>
                        <Assgnmt>
                          <MsgId>MCIC001KIjhjghgtuuiyiyLKIRhpihMkeuh</MsgId>
                          <CreDtTm>2023-02-21T15:30:00.850Z</CreDtTm>
                          <Assgnr>
                            <Agt>
                              <FinInstnId>
                                <Nm>PSP Banque SN 001</Nm>
                                <Othr>
                                  <Id>SNB001</Id>
                                </Othr>
                              </FinInstnId>
                            </Agt>
                          </Assgnr>
                          <Assgne>
                            <Agt>
                              <FinInstnId>
                                <Nm>PSP EME CI 001</Nm>
                                <Othr>
                                  <Id>CIC001</Id>
                                </Othr>
                              </FinInstnId>
                            </Agt>
                          </Assgne>
                        </Assgnmt>
                        <OrgnlAssgnmt>
                          <MsgId>MPIUMOAnXydyOl7iIZSKdzEGZfWcWBa9999</MsgId>
                        </OrgnlAssgnmt>
                        <Rpt>
                          <OrgnlId>ESNB00120230221153554KXvozkpNvhUk9e</OrgnlId>
                          <Vrfctn>true</Vrfctn>
                          <UpdtdPtyAndAcctId>
                            <Pty>
                              <Nm>Mariama Traore</Nm>
                              <Id>
                                <PrvtId>
                                  <DtAndPlcOfBirth>
                                    <BirthDt>2002-08-23</BirthDt>
                                    <CityOfBirth>Dakar</CityOfBirth>
                                    <CtryOfBirth>SN</CtryOfBirth>
                                  </DtAndPlcOfBirth>
                                  <Othr>
                                    <Id>5069712345607</Id>
                                    <SchmeNm>
                                      <Cd>NIDN</Cd>
                                    </SchmeNm>
                                  </Othr>
                                </PrvtId>
                              </Id>               
                              <CtryOfRes>CI</CtryOfRes>
                            </Pty>
                            <Acct>
                              <Id>
                                <Othr>
                                  <Id>+2250771299999</Id>
                                </Othr>
                              </Id>
                              <Tp>
                                <Cd>TRAN</Cd>
                              </Tp>
                              <Ccy>XOF</Ccy>
                              <Nm>P</Nm>
                            </Acct>
                            <Agt>
                              <FinInstnId>
                                <Nm>PSP EME CI 001</Nm>
                                <Othr>
                                  <Id>CIC001</Id>
                                </Othr>
                              </FinInstnId> 
                              <BrnchId>
                                <Id>00000</Id>
                              </BrnchId>
                            </Agt>
                          </UpdtdPtyAndAcctId>
                        </Rpt>
                      </IdVrfctnRpt>
                    </Document>
                  </RequestPayload>
              REPONSE_VERIFICATION_IDENTITE_TYPE_IBAN:
                value: |
                  <RequestPayload xmlns="urn:bceao:pi:xsd:payload.1.0.0"
                    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:bceao:pi:xsd:payload.1.0.0 ../xsd/pi.payload.1.0.0.xsd">
                    <AppHdr xmlns="urn:iso:std:iso:20022:tech:xsd:head.001.001.03">
                      <Fr>
                        <FIId>
                          <FinInstnId>
                            <Nm>PI</Nm>
                            <Othr>
                              <Id>PIUMOA</Id>
                            </Othr>
                          </FinInstnId>
                        </FIId>
                      </Fr>
                      <To>
                        <FIId>
                          <FinInstnId>
                            <Nm>PSP banque TG 005</Nm>
                            <Othr>
                              <Id>TGB005</Id>
                            </Othr>
                          </FinInstnId>
                        </FIId>
                      </To>
                      <BizMsgIdr>MPIUMOAoUUVMhtGwtcHdmyomo9aHZ1cqk77</BizMsgIdr>
                      <MsgDefIdr>camt.014.001.05</MsgDefIdr>
                      <CreDt>2023-02-10T08:30:13.211Z</CreDt>
                      <Sgntr></Sgntr>
                    </AppHdr>
                    <Document xmlns="urn:iso:std:iso:20022:tech:xsd:acmt.024.001.03">
                      <IdVrfctnRpt>
                          <Assgnmt>
                            <MsgId>MCIB030KIjhjghgtuuiyiyLKIRhpihMkeuh</MsgId>
                            <CreDtTm>2023-02-21T15:30:00.850Z</CreDtTm>
                            <Assgnr>
                              <Agt>
                                <FinInstnId>
                                  <Nm>PSP Banque SN 001</Nm>
                                  <Othr>
                                    <Id>SNB001</Id>
                                  </Othr>
                                </FinInstnId>
                              </Agt>
                            </Assgnr>
                            <Assgne>
                              <Agt>
                                <FinInstnId>
                                  <Nm>PSP Banque CI 030</Nm>
                                  <Othr>
                                    <Id>CIB030</Id>
                                  </Othr>
                                </FinInstnId>
                              </Agt>
                            </Assgne>
                          </Assgnmt>
                          <OrgnlAssgnmt>
                            <MsgId>MPIUMOAnXydyOl7iIZSKdzEGZfWcWBa9999</MsgId>
                          </OrgnlAssgnmt>
                          <Rpt>
                            <OrgnlId>ESNB00120230221153554KXvozkpNvhUk9e</OrgnlId>
                            <Vrfctn>true</Vrfctn>
                            <UpdtdPtyAndAcctId>
                              <Pty>
                                <Nm>Seini Doucoure</Nm>
                                <Id>
                                  <PrvtId>
                                    <DtAndPlcOfBirth>
                                      <BirthDt>1998-12-23</BirthDt>
                                      <CityOfBirth>Yamoussoukro</CityOfBirth>
                                      <CtryOfBirth>CI</CtryOfBirth>
                                    </DtAndPlcOfBirth>
                                    <Othr>
                                      <Id>0956812345</Id>
                                      <SchmeNm>
                                        <Cd>NIDN</Cd>
                                      </SchmeNm>
                                    </Othr>
                                  </PrvtId>
                                </Id> 
                                <CtryOfRes>CI</CtryOfRes>
                              </Pty>
                              <Acct>
                                <Id>
                                  <IBAN>CI0110568943000003122583</IBAN>
                                </Id>
                                <Tp>
                                  <Cd>CACC</Cd>
                                </Tp>
                                <Ccy>XOF</Ccy>
                                <Nm>P</Nm>
                              </Acct>
                              <Agt>
                                <FinInstnId>
                                  <Nm>PSP Banque CI 030</Nm>
                                  <Othr>
                                    <Id>CIC030</Id>
                                  </Othr>
                                </FinInstnId> 
                                <BrnchId>
                                  <Id>05689</Id>
                                </BrnchId>
                              </Agt>
                            </UpdtdPtyAndAcctId>
                          </Rpt>
                      </IdVrfctnRpt>
                    </Document>
                  </RequestPayload>
              REJET_VERIFICATION_IDENTITE:
                value: |
                  <RequestPayload xmlns="urn:bceao:pi:xsd:payload.1.0.0"
                    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:bceao:pi:xsd:payload.1.0.0 ../xsd/pi.payload.1.0.0.xsd">
                    <AppHdr xmlns="urn:iso:std:iso:20022:tech:xsd:head.001.001.03">
                      <Fr>
                        <FIId>
                          <FinInstnId>
                            <Nm>PI</Nm>
                            <Othr>
                              <Id>PIUMOA</Id>
                            </Othr>
                          </FinInstnId>
                        </FIId>
                      </Fr>
                      <To>
                        <FIId>
                          <FinInstnId>
                            <Nm>PSP banque TG 005</Nm>
                            <Othr>
                              <Id>TGB005</Id>
                            </Othr>
                          </FinInstnId>
                        </FIId>
                      </To>
                      <BizMsgIdr>MPIUMOAoUUVMhtGwtcHdmyomo9aHZ1cqk77</BizMsgIdr>
                      <MsgDefIdr>camt.014.001.05</MsgDefIdr>
                      <CreDt>2023-02-10T08:30:13.211Z</CreDt>
                      <Sgntr></Sgntr>
                    </AppHdr>
                    <Document xmlns="urn:iso:std:iso:20022:tech:xsd:acmt.024.001.03">
                      <IdVrfctnRpt>
                        <Assgnmt>
                          <MsgId>MCIB030KIjhjghgtuuiyiyLKIRhpihMkeuh</MsgId>
                          <CreDtTm>2023-02-21T15:30:00.850Z</CreDtTm>
                          <Assgnr>
                            <Agt>
                              <FinInstnId>
                                <Nm>PSP Banque SN 001</Nm>
                                <Othr>
                                  <Id>SNB001</Id>
                                </Othr>
                              </FinInstnId>
                            </Agt>
                          </Assgnr>
                          <Assgne>
                            <Agt>
                              <FinInstnId>
                                <Nm>PSP Banque CI 030</Nm>
                                <Othr>
                                  <Id>CIB030</Id>
                                </Othr>
                              </FinInstnId>
                            </Agt>
                          </Assgne>
                        </Assgnmt>
                        <OrgnlAssgnmt>
                          <MsgId>MPIUMOAnXydyOl7iIZSKdzEGZfWcWBa9999</MsgId>
                        </OrgnlAssgnmt>
                        <Rpt>
                          <OrgnlId>ESNB00120230221153554KXvozkpNvhUk9e</OrgnlId>
                          <Vrfctn>false</Vrfctn>
                          <Rsn>
                            <Cd>AC01</Cd>
                          </Rsn>
                        </Rpt>
                      </IdVrfctnRpt>
                    </Document>
                  </RequestPayload>
        required: true
      responses:
        '201':
          description: Message créé
        '400':
          $ref: "#/components/responses/FormatInvalide"
        '401':
          description: Autorisations manquantes

components:

  # *********** SCHEMAS
  schemas:

    # pacs.0008
    MessagePacs008:
      type: object
      required:
        - RequestPayload
      properties:
        RequestPayload:
          type: object
          required:
            - AppHdr
            - Document  
          properties:
            '@xmlns':       # Namespace declaration
              type: string
              enum:
                - urn:bceao:pi:xsd:payload.1.0.0
            # BAH Header 
            AppHdr:
              $ref: "#/components/schemas/MessageAppHeader"
            # Document
            Document:
              type: object
              properties:
                '@xmlns':       # Namespace declaration
                  type: string
                  enum:
                    - urn:iso:std:iso:20022:tech:xsd:pacs.008.001.10
                FIToFICstmrCdtTrf:
                  type: object
                  properties:
                    # Group Header
                    GrpHdr:
                      type: object
                      properties:
                        MsgId:
                          type: string
                        CreDtTm:
                          type: string
                          format: date-time
                        NbOfTxs:
                          type: integer
                          minimum: 1
                          maximum: 1
                        SttlmInf:
                          type: object
                          properties:
                            SttlmMtd:
                              $ref: "#/components/schemas/SettlementMethod1CodeCLRG"
                      required:
                        - MsgId
                        - CreDtTm  
                        - NbOfTxs
                        - SttlmInf
                    # CreditTransferTransaction
                    CdtTrfTxInf:
                      type: object
                      properties:
                        PmtId:
                          type: object
                          properties:
                            EndToEndId:
                              $ref: "#/components/schemas/EndToEndId"
                          required:
                            - EndToEndId
                        PmtTpInf:
                          type: object
                          properties:
                            SvcLvl:
                              type: object
                              properties:
                                Prtry:
                                  type: string
                              required:
                                - Prtry
                            LclInstrm:
                              type: object
                              properties:
                                Prtry:
                                  type: string
                              required:
                                - Prtry
                            CtgyPurp:
                              type: object
                              properties:
                                Prtry:
                                  type: string
                              required:
                                - Prtry
                          required:
                            - LclInstrm
                            - CtgyPurp
                        IntrBkSttlmAmt:
                          $ref: "#/components/schemas/IntrBkSttlmAmt"
                          # type: object
                          # properties:
                          #   Ccy:
                          #     type: string
                          #     xml:
                          #       attribute: true
                          #   valeur:
                          #     type: integer
                          #     min: 1
                        AccptncDtTm:
                          type: string
                          format: date-time
                        ChrgBr:
                          $ref: "#/components/schemas/ChargeBearerType1CodeSLEV"
                        Dbtr:
                          $ref: "#/components/schemas/PartyIdentification135ClientPayeurOuPaye"
                        DbtrAcct:
                          $ref: "#/components/schemas/CashAccount"
                        DbtrAgt:
                          $ref: "#/components/schemas/BranchAndFinancialInstitutionIdentification6PSPPayeurOuPaye"
                        CdtrAgt:
                          $ref: "#/components/schemas/BranchAndFinancialInstitutionIdentification6PSPPayeurOuPaye"
                        Cdtr:
                          $ref: "#/components/schemas/PartyIdentification135ClientPayeurOuPaye"
                        CdtrAcct:
                          $ref: "#/components/schemas/CashAccountCreditor"
                      required:
                        - PmtId
                        - PmtTpInf  
                        - IntrBkSttlmAmt
                        - AccptncDtTm  
                        - ChrgBr
                        - Dbtr
                        - DbtrAcct
                        - DbtrAgt
                        - CdtrAgt
                        - Cdtr
                        - CdtrAcct
                  required:
                    - GrpHdr
                    - CdtTrfTxInf
              required:
                - FIToFICstmrCdtTrf

    # pacs.0002
    MessagePacs002:
      type: object
      required:
        - RequestPayload
      properties:
        RequestPayload:
          type: object
          required:
            - AppHdr
            - Document  
          properties:
            '@xmlns':       # Namespace declaration
              type: string
              enum:
                - urn:bceao:pi:xsd:payload.1.0.0
            # BAH Header 
            AppHdr:
              $ref: "#/components/schemas/MessageAppHeader"
            # Document
            Document:
              type: object
              properties:
                '@xmlns':       # Namespace declaration
                  type: string
                  enum:
                    - urn:iso:std:iso:20022:tech:xsd:pacs.002.001.12
                FIToFIPmtStsRpt:
                  type: object
                  properties:
                    # Group Header
                    GrpHdr:
                      type: object
                      properties:
                        MsgId:
                          type: string
                        CreDtTm:
                          type: string
                          format: date-time
                      required:
                        - MsgId
                        - CreDtTm
                    # CreditTransferTransaction
                    TxInfAndSts:
                      type: object
                      properties:
                        OrgnlGrpInf:
                          type: object
                          properties:
                            OrgnlMsgId:
                              type: string
                            OrgnlMsgNmId:
                              type: string
                            OrgnlCreDtTm:
                              type: string
                          required:
                            - EndToEndId
                        OrgnlEndToEndId:
                          type: string
                        TxSts:
                          type: string
                          enum:
                            - ACSP
                            - RJCT
                        Rsn:
                          type: object
                          properties:
                            Cd:
                              $ref: "#/components/schemas/Pacs002RejectRsnCd"
                          required:
                            - Cd
                        AddtlInf:
                          $ref: '#/components/schemas/Max105Text'
                      anyOf:
                        - required:
                          - OrgnlGrpInf
                          - OrgnlEndToEndId  
                          - TxSts
                        - required:
                          - OrgnlGrpInf
                          - OrgnlEndToEndId  
                          - TxSts
                          - Rsn
                          - AddtlInf
                      
                  required:
                    - GrpHdr
                    - TxInfAndSts
              required:
                - FIToFIPmtStsRpt

     # pacs.0002
    MessagePacs028:
      type: object
      required:
        - RequestPayload
      properties:
        RequestPayload:
          type: object
          required:
            - AppHdr
            - Document  
          properties:
            '@xmlns':       # Namespace declaration
              type: string
              enum:
                - urn:bceao:pi:xsd:payload.1.0.0
            # BAH Header 
            AppHdr:
              $ref: "#/components/schemas/MessageAppHeader"
            # Document
            Document:
              type: object
              properties:
                '@xmlns':       # Namespace declaration
                  type: string
                  enum:
                    - urn:iso:std:iso:20022:tech:xsd:pacs.028.001.05
                FIToFIPmtStsReq:
                  type: object
                  properties:
                    # Group Header
                    GrpHdr:
                      type: object
                      properties:
                        MsgId:
                          type: string
                        CreDtTm:
                          type: string
                          format: date-time
                      required:
                        - MsgId
                        - CreDtTm
                    # CreditTransferTransaction
                    TxInf:
                      type: object
                      properties:
                        OrgnlEndToEndId:
                          type: string
                      required:
                        - OrgnlEndToEndId
                  required:
                    - GrpHdr
                    - TxInf
              required:
                - FIToFIPmtStsReq

    # acmt.023
    MessageAcmt023:
      type: object
      required:
        - RequestPayload
      properties:
        RequestPayload:
          type: object
          required:
            - AppHdr
            - Document  
          properties:
            '@xmlns':       # Namespace declaration
              type: string
              enum:
                - urn:bceao:pi:xsd:payload.1.0.0
            # BAH Header 
            AppHdr:
              $ref: "#/components/schemas/MessageAppHeader"
            # Document
            Document:
              type: object
              properties:
                '@xmlns':       # Namespace declaration
                  type: string
                  enum:
                    - urn:iso:std:iso:20022:tech:xsd:acmt.023.001.03
                IdVrfctnReq:
                  type: object
                  properties:
                    Assgnmt:
                      type: object
                      properties:
                        MsgId:
                          type: string
                        CreDtTm:
                          type: string
                          format: date-time
                        # information assigner (payeur)
                        Assgnr:
                          type: object
                          properties:
                            Agt:
                              type: object
                              properties:
                                FinInstnId:
                                  $ref: "#/components/schemas/FinancialInstitutionIdentification18NmOthr"
                              required:
                                - FinInstnId
                          required:
                            - Agt 
                        # information assigne (paye)
                        Assgne:
                          type: object
                          properties:
                            Agt:
                              type: object
                              properties:
                                FinInstnId:
                                  $ref: "#/components/schemas/FinancialInstitutionIdentification18NmOthr"
                              required:
                                - FinInstnId
                          required:
                            - Agt 
                      required:
                        - MsgId
                        - CreDtTm
                        - Assgnr
                        - Assgne
                    Vrfctn:
                      type: object
                      properties: 
                        Id:
                          type: string
                        PtyAndAcctId:
                          type: object
                          properties:
                            Acct:
                              type: object
                              properties:
                                Id:
                                  $ref: '#/components/schemas/AccountIdentification4Choice'
                              required:
                                - Id
                          required:
                            - Acct
                      required:
                        - Id
                        - PtyAndAcctId
                  required:
                    - Assgnmt
                    - Vrfctn
              required:
                - IdVrfctnReq    
    
    # acmt.024
    MessageAcmt024:
      type: object
      required:
        - RequestPayload
      properties:
        RequestPayload:
          type: object
          required:
            - AppHdr
            - Document  
          properties:
            '@xmlns':       # Namespace declaration
              type: string
              enum:
                - urn:bceao:pi:xsd:payload.1.0.0
            # BAH Header 
            AppHdr:
              $ref: "#/components/schemas/MessageAppHeader"
            # Document
            Document:
              type: object
              properties:
                '@xmlns':       # Namespace declaration
                  type: string
                  enum:
                    - urn:iso:std:iso:20022:tech:xsd:acmt.024.001.03
                IdVrfctnRpt:
                  type: object
                  properties:
                    Assgnmt:
                      type: object
                      properties:
                        MsgId:
                          type: string
                        CreDtTm:
                          type: string
                          format: date-time
                        # information assigner (payeur)
                        Assgnr:
                          type: object
                          properties:
                            Agt:
                              type: object
                              properties:
                                FinInstnId:
                                  $ref: "#/components/schemas/FinancialInstitutionIdentification18NmOthr"
                              required:
                                - FinInstnId
                          required:
                            - Agt 
                        # information assigne (paye)
                        Assgne:
                          type: object
                          properties:
                            Agt:
                              type: object
                              properties:
                                FinInstnId:
                                  $ref: "#/components/schemas/FinancialInstitutionIdentification18NmOthr"
                              required:
                                - FinInstnId
                          required:
                            - Agt 
                      required:
                        - MsgId
                        - CreDtTm
                        - Assgnr
                        - Assgne
                    OrgnlAssgnmt:
                      type: object
                      properties:
                        MsgId:
                          type: string
                    Rpt:
                      type: object
                      properties:
                        OrgnlId: 
                          type: string
                        Vrfctn: 
                          type: boolean
                        Rsn:
                          type: object
                          properties: 
                            Cd: 
                              type: string
                        UpdtdPtyAndAcctId:
                          type: object
                          properties: 
                            Pty:
                              $ref: '#/components/schemas/PartyIdentification135ClientPayeurOuPaye'
                            Acct:
                              $ref: '#/components/schemas/CashAccount40'
                            Agt: 
                              type: object
                              properties:
                                FinInstnId:
                                  $ref: "#/components/schemas/FinancialInstitutionIdentification18NmOthr"
                                BrnchId: 
                                  type: object
                                  properties: 
                                    Id: 
                                      type: string
                              required:
                                - FinInstnId
                                - BrnchId
                      anyOf:
                        - required:
                          - OrgnlId
                          - Vrfctn
                          - Rsn
                        - required:
                          - OrgnlId
                          - Vrfctn
                          - UpdtdPtyAndAcctId
                  required:
                    - Assgnmt
                    - OrgnlAssgnmt
                    - Rpt
              required:
                - IdVrfctnRpt    


    # acmt.024 UpdtdPtyAndAcctId Acct
    CashAccount40:
      type: object
      properties: 
        Id:
          $ref: '#/components/schemas/AccountIdentification4Choice'
        Tp: 
          type: object
          properties: 
            Cd:
              type: string
          required:
            - Cd
        Ccy: 
          type: string
        Nm: 
          type: string
      required:
        - Id
        - Tp
        - Ccy
        - Nm
    # Devise XOF
    CurrencyXOF:
      type: string
      enum:
        - XOF
    
    IntrBkSttlmAmt:
      type: object
      properties:
        Ccy:
          type: string
          xml:
            attribute: true
        value:
          type: integer

    # Country code 
    CountryCodeUEMOA:
      type: string
      enum:
        - CI
        - SN
        - ML
        - GW
        - BF
        - NE
        - BJ
        - TG

    # Max 35 Text: used by Id (Code Membre)
    Max35Text:
      type: string
      minLength: 1
      maxLength: 35
      description: Specifies a character string with a maximum length of 35 characters.
    
    # Max 140 text: Nm in PSP Name
    Max140Text:
      type: string
      minLength: 1
      maxLength: 140
      description: Specifies a character string with a maximum length of 140 characters.

    # Max 2048 text: Used By Proxy
    Max2048Text:
      type: string
      minLength: 1
      maxLength: 2048
      description: Specifies a character string with a maximum length of 2048 characters.
    
    Max105Text:
      type: string
      minLength: 1
      maxLength: 105
      description: Specifies a character string with a maximum length of 105 characters.

    # Code Membre: Code Pays (2 positions) + Code type de participant (1 position) + Numéro ( 3 positions).
    CodeMembre:
      type: string
      pattern: '^(CI|SN|ML|BF|BJ|TG|NE|GW)[BCDF]\d{3}$'
      example: "SNB001"

    # Message Identification: M (1) + CodeMembre (6) + UNIQUEID (28)  
    MessageId:
      type: string
      pattern: '^M(CI|SN|ML|BF|BJ|TG|NE|GW)[BCDF]\d{3}[a-zA-Z0-9]{28}$'
      example: "MSNB0011234567890POIUYTREZAQSDFGHJK"

    # EndToEndId: E (1) + CodeMembre (6) + Date (20221121161834) (14) + UNIQUEID (14)   
    EndToEndId:
      type: string
      pattern: '^E(CI|SN|ML|BF|BJ|TG|NE|GW)[BCDF]\d{3}\d{14}[a-zA-Z0-9]{14}$'
      example: "ESNB00120221121161834ABCDFG78965412"
    
    # SettlementMethod1Code: 
    SettlementMethod1CodeCLRG:
      type: string
      enum:
        - CLRG

    # Charge Bearer: SLEV
    ChargeBearerType1CodeSLEV:
      type: string
      enum:
        - SLEV
    
    # FinInstnId > Othr
    GenericFinancialIdentification1:
      type: object
      properties:
        Id:
          $ref: '#/components/schemas/CodeMembre'
      required:
        - Id

    # FinInstnId
    FinancialInstitutionIdentification18NmOthr:
      type: object
      properties:
        Nm:
          $ref: "#/components/schemas/Max140Text"
        Othr:
          $ref: '#/components/schemas/GenericFinancialIdentification1'
      required:
        - Nm
        - Othr

    # BranchAndFinancialInstitutionIdentification6
    MessageAppHeaderFr:
      type: object
      properties:
        FinInstnId:
          $ref: "#/components/schemas/FinancialInstitutionIdentification18NmOthr"
      required:
        - FinInstnId

    # Party44Choice From or To in BAH headear
    Party44ChoiceFr:
      type: object
      properties:
        FIId:
          $ref: "#/components/schemas/MessageAppHeaderFr"
      required:
        - FIId
    
    # To PI
    Party44ChoiceToPI:
      type: object
      properties:
        FIId:
          type: object
          properties:
            FinInstnId:
              type: object
              properties:
                Nm:
                  type: string
                  enum:
                    - PI
                Othr:
                  type: object
                  properties:
                    Id:
                      type: string
                      enum:
                        - PIUMOA
                  required:
                    - Id
              required:
                - Nm
                - Othr
          required:
            - FinInstnId
      required:
        - FIId

    # App Header
    MessageAppHeader:
      type: object
      properties:
        '@xmlns':       # Namespace declaration
          type: string
          enum:
            - urn:iso:std:iso:20022:tech:xsd:head.001.001.03
        Fr:
          $ref: "#/components/schemas/Party44ChoiceFr"
        To:
          $ref: "#/components/schemas/Party44ChoiceToPI"
        BizMsgIdr:
          $ref: '#/components/schemas/MessageId'
        MsgDefIdr:
          type: string
          enum:
            - pacs.008.001.10
        CreDt:
          type: string
          format: date-time
      required:
        - Fr
        - To  
        - BizMsgIdr
        - MsgDefIdr  
        - CreDt

    # BranchAndFinancialInstitutionIdentification6
    BranchAndFinancialInstitutionIdentification6PSPPayeurOuPaye:
      type: object
      properties:
        FinInstnId:
          $ref: "#/components/schemas/FinancialInstitutionIdentification18NmOthr"
        BrnchId:
          type: object
          properties:
            Id:
              $ref: '#/components/schemas/Max35Text'
      required:
        - FinInstnId
        - BrnchId
    
    # Types de comptes
    ExternalCashAccountType1Code:
      type: string
      enum:
        - CACC
        - MCOD
        - SHID
      description: |
        This endpoint returns a list of items.

        | Column 1 | Column 2 |
        | -------- | -------- |
        | Row 1, Column 1 | Row 1, Column 2 |
        | Row 2, Column 1 | Row 2, Column 2 |

    # Account IBAN
    IBAN2007Identifier:
      type: object
      description: International Bank Account Number (IBAN) - identifier used internationally by financial institutions to uniquely identify the account of a customer.
      properties:
        IBAN:
          type: string
    
    # Account Othr
    GenericAccountIdentification1:
      type: object
      description: Unique identification of an account, as assigned by the account servicer, using an identification scheme.
      properties:
        Othr:
          type: object
          properties:
            Id:
              type: string
    
    # Account > Proxy
    ProxyAccountIdentification1:
      type: object
      description: Information related to a proxy  identification of the account.
      properties:
        Id:
          $ref: '#/components/schemas/Max2048Text'
        Tp:
          type: object
          properties:
            Cd:
              type: string
              enum:
                - SHID
                - MBNO
                - MCOD

    # Account > Id
    AccountIdentification4Choice:
      type: object
      description: Specifies the unique identification of an account as assigned by the account servicer.
      oneOf:
        - $ref: '#/components/schemas/IBAN2007Identifier'
        - $ref: '#/components/schemas/GenericAccountIdentification1'

    # Account General
    CashAccount:
      type: object
      properties:
        Id:
          $ref: '#/components/schemas/AccountIdentification4Choice'
        Tp:
          type: object
          properties:
            Cd:
              $ref: "#/components/schemas/ExternalCashAccountType1Code"
        Ccy:
          $ref: "#/components/schemas/CurrencyXOF"
        
      required:
        - Id
        - Tp
        - Ccy                       
      
    # Account Creditor 
    CashAccountCreditor:
      allOf:    
        - $ref: '#/components/schemas/CashAccount'
        - type: object
          properties:
            Prxy:
              $ref: "#/components/schemas/ProxyAccountIdentification1"
    
    # Postal address only "TownName" and "AddressLine"
    PostalAddress24Client:
      type: object
      properties:
        TownName:
          $ref: '#/components/schemas/Max35Text'
        AddressLine:
          type: array
          maxItems: 7
          description: Information that locates and identifies a specific address, as defined by postal services, presented in free format text.
          items:
            type: string
            maxLength: 70
          
    # Creditor or debtor client
    PartyIdentification135ClientPayeurOuPaye:
      type: object
      properties:
        Nm:
          $ref: '#/components/schemas/Max140Text'
        PstlAdr:
           $ref: '#/components/schemas/PostalAddress24Client'
        CtryOfRes:
           $ref: '#/components/schemas/CountryCodeUEMOA'
      required:
        - Nm
        - CtryOfRes
    
    # Problem RFC 7807
    Problem7807:
      type: object
      properties:
        type:
          type: string
          description: A URI reference that identifies the problem type
          example: about:blank
        title:
          type: string
          description: A short, human-readable summary of the problem
          example: Bad Request
        status:
          type: integer
          description: The HTTP status code for this occurrence of the problem
          example: 400
        detail:
          type: string
          description: A human-readable explanation specific to this occurrence of the problem
          example: "122:0 Element '{urn:iso:std:iso:20022:tech:xsd:pacs.008.001.10}Id': [facet 'maxLength'] The value has a length of '36'; this exceeds the allowed maximum length of '34'."
      xml:
        name: problem
        namespace: "urn:ietf:rfc:7807"
    
    # Country code 
    Pacs002RejectRsnCd:
      type: string
      enum:
        - AC03
        - AC06
        - AC07
        - AC14
        - AG01
        - AM21
        - BE01
        - BE17
        - FR01
      description: |
        - AC03: Le numéro de compte du payé est invalide
        - AC06: Le compte spécifié est bloqué.
        - AC07: Compte du payé clôturé
        - AC14: Type de compte du payé invalide
        - AG01: Transaction interdite sur ce type de compte.
        - AM21: Le montant de la transaction dépasse les limites convenues entre la banque et le client.
        - BE01: Le nom du client final n'est pas lié au numéro de compte associé.
        - BE17: Code d'identification du payé ou du créditeur final manquant ou invalide
        - FR01: Retourné à la suite d'une fraude.
        - UPAY: Le paiement n'est pas justifié.

  # *********** RESPONSES
  responses:
    FormatInvalide:
      description: La requête est malformée
      content:
        application/problem+xml:
          schema:
            $ref: "#/components/schemas/Problem7807"
          examples:
            example:
              $ref: "#/components/examples/Problem7807ExempleBadRequest"
        application/problem+json:
          schema:
            $ref: "#/components/schemas/Problem7807"
          examples:
            exemple:
              $ref: "#/components/examples/Problem7807ExempleBadRequest"
        
  # *********** EXEMPLES
  examples:
    # Probleme 7807
    Problem7807ExempleBadRequest:
      summary: "Problème format invalide"
      value:
        type: "about:blank"
        title: "Bad Request"
        status: 400
        detail: "Format du message invalide"

    # Virement P2P
    Pacs002ExempleVirementReponsePositive:
      summary: "Exemple de pacs.002 d'acceptation d'une demande de virement"
      value:
        AppHdr:
          Fr:
            FIId:
              FinInstnId:
                Nm: "PSP Banque SN 234"
                Othr:
                  Id: "SNB234"
          To:
            FIId:
              FinInstnId:
                Nm: "PI"
                Othr:
                  Id: "PIUMOA"
          BizMsgIdr: "MSNB234nXAdyOl7iIZSKdzEGZfWcWBaV6a7"
          MsgDefIdr: "pacs.002.001.12"
          CreDt: "2023-02-21T15:30:00.950Z"
        Document:
          FIToFIPmtStsRpt:
            GrpHdr:
              MsgId: "MSNB234nXydyOl7iIZSKdzEGZfWcWBaB6bY"
              CreDtTm: "2023-02-21T15:30:00.950Z"
            TxInfAndSts:
              OrgnlGrpInf:
                OrgnlMsgId: "MPIUMOA9vydyOl7iIZSMdz3GZfWcWBa5896"
                OrgnlMsgNmId: "pacs.008.001.10"
                OrgnlCreDtTm: "2023-02-21T15:30:01.600Z"
              OrgnlEndToEndId: "ESNB00120230221153554KXvozkpNvhUk9e"
              TxSts: "ACSP"

    # Virement P2P
    Pacs002ExempleVirementReponseNegative:
      summary: "Exemple de pacs.002 de rejet d'une demande de virement"
      value:
        AppHdr:
          Fr:
            FIId:
              FinInstnId:
                Nm: "PSP Banque SN 234"
                Othr:
                  Id: "SNB234"
          To:
            FIId:
              FinInstnId:
                Nm: "PI"
                Othr:
                  Id: "PIUMOA"
          BizMsgIdr: "MSNB234nXAdyOl7iIZSKdzEGZfWcWBaV6a7"
          MsgDefIdr: "pacs.002.001.12"
          CreDt: "2023-02-21T15:30:00.950Z"
        Document:
          FIToFIPmtStsRpt:
            GrpHdr:
              MsgId: "MSNB234nXydyOl7iIZSKdzEGZfWcWBaB6bY"
              CreDtTm: "2023-02-21T15:30:00.950Z"
            TxInfAndSts:
              OrgnlGrpInf:
                OrgnlMsgId: "MPIUMOA9vydyOl7iIZSMdz3GZfWcWBa5896"
                OrgnlMsgNmId: "pacs.008.001.10"
                OrgnlCreDtTm: "2023-02-21T15:30:01.600Z"
              OrgnlEndToEndId: "ESNB00120230221153554KXvozkpNvhUk9e"
              TxSts: "RJCT"
              Rsn:
                Cd: "AC07"  
              AddtlInf: "Le Compte du payé est clôturé"
    
    # Demande statut pacs.028
    Pacs028ExempleVirementStatut:
      summary: "Exemple de pacs.028 de demande de statut de virement"
      value:
        AppHdr:
          Fr:
            FIId:
              FinInstnId:
                Nm: "PSP Banque SN 234"
                Othr:
                  Id: "SNB234"
          To:
            FIId:
              FinInstnId:
                Nm: "PI"
                Othr:
                  Id: "PIUMOA"
          BizMsgIdr: "MSNB234nXAdyOl7iIZSKdzEGZfWcWBaV6a7"
          MsgDefIdr: "pacs.002.001.12"
          CreDt: "2023-02-21T15:30:00.950Z"
        Document:
          FIToFIPmtStsReq:
            GrpHdr:
              MsgId: "MSNB234nXydyOl7iIZSKdzEGZfWcWBaB6bY"
              CreDtTm: "2023-02-21T15:30:00.950Z"
            TxInf:
              OrgnlEndToEndId: "ESNB00120230221153554KXvozkpNvhUk9e"

    # Acmt.023
    Acmt023ExempleVerification:
      summary: "Exemple de acmt.023 envoyé pour une verification d'identité"
      value:
        AppHdr:
          Fr:
            FIId:
              FinInstnId:
                Nm: "PSP Banque SN 001"
                Othr:
                  Id: "SNB001"
          To:
            FIId:
              FinInstnId:
                Nm: "PI"
                Othr:
                  Id: "PIUMOA"
          BizMsgIdr: "MSNB001nXAdyOl7iIZSKdzEGZfWcWBaV6a7"
          MsgDefIdr: "pacs.008.001.10"
          CreDt: "2023-02-21T15:30:01.250Z"
        Document:
          IdVrfctnReq:
            Assgnmt:
              MsgId: "MSNB001nXydyOl7iIZSKdzEGZfWcWBaB6bY"
              CreDtTm: "2023-02-21T15:35:54.362Z"
              Assgnr:
                Agt:
                  FinInstnId:
                    Nm: PSP Banque SN 001
                    Othr:
                      Id: SNB001
              Assgne:
                Agt:
                  FinInstnId:
                    Nm: PSP EME CI 001
                    Othr:
                      Id: CIC001
            Vrfctn:
              Id: ESNB00120230221153554KXvozkpNvhUk9e
              PtyAndAcctId:
                Pty:
                  Nm: Mariama Traore
                  CtryOfRes: CI
                Acct: 
                  Id:
                    Othr:
                      Id: +2250771299999

    # Acmt.024 reponse positive
    Acmt024ExempleVerificationReponsePositive:
      summary: "Exemple reponse positive d'acmt.024 envoyé pour une verification d'identité"
      value:
        AppHdr:
          Fr:
            FIId:
              FinInstnId:
                Nm: "PSP Banque SN 001"
                Othr:
                  Id: "SNB001"
          To:
            FIId:
              FinInstnId:
                Nm: "PI"
                Othr:
                  Id: "PIUMOA"
          BizMsgIdr: "MSNB001nXAdyOl7iIZSKdzEGZfWcWBaV6a7"
          MsgDefIdr: "pacs.008.001.10"
          CreDt: "2023-02-21T15:30:01.250Z"
        Document:
          IdVrfctnRpt:
            Assgnmt:
              MsgId: "MSNB001nXydyOl7iIZSKdzEGZfWcWBaB6bY"
              CreDtTm: "2023-02-21T15:35:54.362Z"
              Assgnr:
                Agt:
                  FinInstnId:
                    Nm: PSP Banque SN 001
                    Othr:
                      Id: SNB001
              Assgne:
                Agt:
                  FinInstnId:
                    Nm: PSP EME CI 001
                    Othr:
                      Id: CIC001
            OrgnlAssgnmt:
              MsgId: MSNB001nXydyOl7iIZSKdzEGZfWcWBaB6bY
            Rpt: 
              OrgnlId: ESNB00120230221153554KXvozkpNvhUk9e
              Vrfctn: true
              UpdtdPtyAndAcctId: 
                Pty: 
                  Nm: Mariama Traore
                  CtryOfRes: CI
                Acct: 
                  Id:
                    Othr:
                      Id: +2250771299999
                  Tp: 
                    Cd: TRAN
                  Ccy: XOF
                  Nm: P
                Agt: 
                  FinInstnId:
                    Nm: PSP EME CI 001
                    Othr:
                      Id: CIC001    
                  BrnchId: 
                    Id: 00000     

    # Acmt.024 reponse negative
    Acmt024ExempleVerificationReponseNegative:
      summary: "Exemple reponse Negative d'acmt.024 envoyé pour une verification d'identité"
      value:
        AppHdr:
          Fr:
            FIId:
              FinInstnId:
                Nm: "PSP Banque SN 001"
                Othr:
                  Id: "SNB001"
          To:
            FIId:
              FinInstnId:
                Nm: "PI"
                Othr:
                  Id: "PIUMOA"
          BizMsgIdr: "MSNB001nXAdyOl7iIZSKdzEGZfWcWBaV6a7"
          MsgDefIdr: "pacs.008.001.10"
          CreDt: "2023-02-21T15:30:01.250Z"
        Document:
          IdVrfctnRpt:
            Assgnmt:
              MsgId: "MSNB001nXydyOl7iIZSKdzEGZfWcWBaB6bY"
              CreDtTm: "2023-02-21T15:35:54.362Z"
              Assgnr:
                Agt:
                  FinInstnId:
                    Nm: PSP Banque SN 001
                    Othr:
                      Id: SNB001
              Assgne:
                Agt:
                  FinInstnId:
                    Nm: PSP EME CI 001
                    Othr:
                      Id: CIC001
            OrgnlAssgnmt:
              MsgId: MSNB001nXydyOl7iIZSKdzEGZfWcWBaB6bY
            Rpt: 
              OrgnlId: ESNB00120230221153554KXvozkpNvhUk9e
              Vrfctn: false
              Rsn: 
                Cd: AC01